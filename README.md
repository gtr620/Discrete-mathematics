# -
计算主析取范式,主合取范式,真值表

“栈”求解表达式的值中对“非”的处理和优先级表
    建立两个栈，OPTR表示运算符栈，OPND表示命题变元，在OPTR压入#表示命题公式开头，运行时自动在命题公式字符串（Propositional）末尾添加#表示结束。与普通的求解过程不同的是，命题公式涉及“非”运算，而一般求值过程有两个变元，如a+b中的a和b。在非的运算中只有一个变元，这就使栈的计算结构变得很复杂。解决方案是，让用户输入大写命题变元，经过string SolveFei(string Propositional)函数的字符串处理后，遇到如A*-B的情形转化为A*b，当在栈中进行运算时，小写字母和大写字母的运算逻辑相反。此时还需要处理“-（”相遇的问题，我在Judge函数（栈计算表达式值的主函数）中设置int index指示括号前面是否有非，当有非存在时对Propositional字符串进行处理，去除掉非，标记index为1（表示存在“-（”相遇），在case==0（若两括号（）相遇，case==0）中若index==1，则反转计算结果，存入栈中。下面列出了运算符的优先级，行表示已存入栈OPTR中的运算符，列表示即将存入栈中的运算符（行大于列为>）。
  非>合取=析取（在先优先）>单条件>双条件
  注：对栈的操作函数存放在Stack.h中
 
真值表分布规律的计算
   真值表列数与行数对应规律：行数=2^列数（命题变元个数），如图所示第一个命题变元A上半部分为真，下半部分为假。第二个变元四分之一为真，四分之一为假，依次轮换。第三个变元八分之一，直到行数分之一，即真值表最右面一行1，0轮换交替。
通过计算求出真值表可大大节约存储空间。

范式中∧与∨符号的输出
    这两个符号不是ASCⅡ中的字符，无法存储到string。存入时用：替代∨，用&替代∧，输出时检测若为这两个符号跳过，并用cout << "∧";和cout << "∨";替代。
    
主要思路:
     定义全局变量 row和column分别表示行数和列数；字符串ZXQFS,ZHQFS分别表示主析取范式和主合取范式。读取命题变元存入Item,命题公式存入字符串Propositional中，计算row。依次输出Item，打印命题变元。在输出真值表前用SolveFei函数处理命题公式中的含-变元，具体处理方法见上文中“栈求解表达式的值”。利用双重循环输出真值表，真值表第一个命题变元的第一个真值坐标为（1.1），第二个命题变元的第一个真值坐标为（1.2），表示第一行第二列。Calculate函数根据输入的坐标值计算当前位置的真值。当输出完每个命题变元当前行的真值后，计算命题公式的真值：Judge函数读入Propositional，Item，和x（当前行数），首先在Propositional字符串右端添加‘#’表示结束，建立OPTR和OPND两个栈分别表示运算符和命题变元。将#压入OPTR栈中，由于定义的Push等对栈的操作中不返回当前元素只返回状态，所以用SElemType定义e，temp等元素带回字符。进入循环while (e.data != '#' || temp1.data != '#')，当读取的下一个元素和OPTR栈中的元素中至少有一个不是‘#’时，继续循环。若两个均不为‘#’表示已经计算完成（两个#相遇时会被弹出），输出OPND中的计算结果。循环中首先检测Propositional的当前字符是否为非，若为非则记录当前存在“-（”相遇的情况，即在计算完括号中表达式的真值后取反。如果当前字符不是运算符，压入OPND栈中。否则进行运算符优先级比较，若当前待入栈运算符优先级大于栈顶运算符，压入栈中等待计算。若待压入元素优先级低，取出当前OPTR的栈顶元素，同时取出两个OPND元素进行真值运算，具体的运算方法为：Operate函数接收两个OPND元素，OPTR元素，当前行数，命题变元字符串Item为参数，利用ColumnChange函数计算当前传入元素的列数，利用CalucateList计算这两个变元的真值。根据运算符计算返回此次计算的真值。需要注意的是，传入此函数的变量不只有命题变元，还有1，0。1，0为计算完的子表达式的真值，在传入函数时有检测是否为字符，若为1或0，跳过通过CalucateList计算，直接进行逻辑判断输出真值。将真值压入OPTD栈，进行下一步计算。直至##相遇。计算结束，该行真值表计算完成。同时进行主析取范式和主合取范式的处理，读取此次输出的表达式真值，若为1，计算主析取范式，即根据当前行命题变元的真值情况，存入ZXQFS字符串，需要注意的是析取和合取符号都不是ASCⅡ码，这里使用其他符号替代，每次存入析取后保存括号。若为0，计算主合取范式，原理与析取范式类似。打印范式时遇到标记的符号用cout<<按字符串输出。

注:UTF-8打开
第一次提交代码,有不对的地方还请大家指正
